<div class="container mx-auto px-4">
    <h2 class="text-xl font-bold text-sky-700 mb-4 text-center">
        Class ID: {{ classId }}
    </h2>

    <!-- Dugme za prikaz selekcije -->
    <div class="flex justify-center mb-6">
        <button
            class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-6 rounded-full flex items-center gap-2"
            (click)="toggleSelectMode()">
            <i class="fa fa-plus"></i> Add Absence
        </button>
    </div>

    <div *ngIf="loading" class="text-gray-500 text-center">Loading...</div>

    <div class="flex justify-center mb-4">
        <input type="text" placeholder="Search students..." [(ngModel)]="searchQuery" (input)="onSearch()"
            class="border border-gray-300 rounded px-3 py-2 w-64" />
    </div>

    <!-- Kartice uÄenika -->
    <div class="row flex flex-wrap justify-center gap-8" *ngIf="!loading">
        <div class="single_advisor_profile bg-white rounded-lg shadow-md overflow-hidden w-64 transition hover:shadow-lg flex flex-col justify-between cursor-pointer"
            *ngFor="let s of students">

            <div class="advisor_thumb relative">
                <img src="https://cdn.discordapp.com/attachments/1090339123463729224/1422245867275948092/image.png?ex=68dbf92e&is=68daa7ae&hm=f94a129359363d7ab393db7036a97feba079a170851cee5af6d9be4a9277ecfd&"
                    alt="" class="w-full h-48 object-cover" [routerLink]="['/student', s.userId, 'profile']" />
                <div class="social-info absolute bottom-2 right-2 flex gap-2">
                    <a href="#" class="text-white bg-blue-500 p-2 rounded-full"><i class="fa fa-facebook"></i></a>
                    <a href="#" class="text-white bg-sky-400 p-2 rounded-full"><i class="fa fa-twitter"></i></a>
                    <a href="#" class="text-white bg-blue-700 p-2 rounded-full"><i class="fa fa-linkedin"></i></a>
                </div>
            </div>

            <div class="single_advisor_details_info text-center p-4">
                <h6 class="text-lg font-semibold text-gray-800">{{ s.name }} {{ s.lastName }}</h6>
                <p class="designation text-gray-600 mb-3">Absences: {{ s.numberOfAbsences }}</p>

                <!-- Checkbox u kartici -->
                <div *ngIf="selectMode" class="flex justify-center items-center gap-2 mt-2">
                    <input type="checkbox" class="w-5 h-5 accent-sky-600 cursor-pointer" [(ngModel)]="s.selected"
                        id="student{{s.id}}" />
                    <label for="student{{s.id}}" class="text-sm font-medium cursor-pointer">
                        Select student
                    </label>
                </div>
            </div>

        </div>

        <!-- Confirm dugme centrirano -->
        <div *ngIf="selectMode" class="text-center mt-8 mb-8">
            <button class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full shadow-md"
                (click)="confirmSelection()">
                Confirm Selection
            </button>
        </div>
    </div>